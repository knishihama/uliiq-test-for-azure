(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{259:function(e,t,n){"use strict";n.r(t);n(28);var i=n(231),o=["https://fabrikamb2c.onmicrosoft.com/helloapi/demo.read"],c="https://fabrikamb2chello.azurewebsites.net/hello",s=window.location.origin,a=new i.UserAgentApplication("e760cab2-b9a1-4c0d-86fb-ff7084abd902","",function(){},{redirectUri:s}),l={methods:{login:function(){a.loginPopup(o).then(function(e){a.acquireTokenSilent(o).then(function(e){updateUI()},function(e){a.acquireTokenPopup(o).then(function(e){updateUI()},function(e){logMessage("Error acquiring the popup:\n"+e)})})},function(e){logMessage("Error during login:\n"+e)})},updateUI:function(){var e=a.getUser().name;logMessage("User '"+e+"' logged-in");var t=document.getElementById("auth");t.innerHTML="logout",t.setAttribute("onclick","logout();"),document.getElementById("label").innerText="Hello "+e,document.getElementById("callApiButton").setAttribute("class","visible")},callApi:function(){a.acquireTokenSilent(o).then(function(e){callApiWithAccessToken(e)},function(e){a.acquireTokenPopup(o).then(function(e){callApiWithAccessToken(e)},function(e){logMessage("Error acquiring the access token to call the Web api:\n"+e)})})},callApiWithAccessToken:function(e){$.ajax({type:"GET",url:c,headers:{Authorization:"Bearer "+e}}).done(function(e){logMessage("Web APi returned:\n"+JSON.stringify(e))}).fail(function(e,t){logMessage("Error calling the Web api:\n"+t)})},logout:function(){a.logout()},logMessage:function(e){document.body.querySelector(".response").appendChild(document.createTextNode("\n"+e))}}},r=n(12),u=Object(r.a)(l,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("script",{staticClass:"pre",attrs:{src:"https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.4/bluebird.min.js"}}),e._v(" "),n("script",{attrs:{src:"https://secure.aadcdn.microsoftonline-p.com/lib/0.1.1/js/msal.min.js"}}),e._v(" "),n("script",{staticClass:"pre",attrs:{src:"https://code.jquery.com/jquery-3.2.1.min.js"}}),e._v(" "),n("h2",[e._v("Getting an access token with Azure AD B2C and calling a Web API")]),e._v(" "),n("div",[n("div",{attrs:{id:"label"}},[e._v("Sign-in with Microsoft Azure AD B2C")]),e._v(" "),n("a",{attrs:{onclick:"login()"}},[e._v("Login")]),e._v(" "),n("button",{staticClass:"hidden",attrs:{id:"callApiButton",onclick:"callApi()"}},[e._v("Call Web API")])]),e._v(" "),n("pre",{staticClass:"response"})])}],!1,null,null,null);t.default=u.exports}}]);